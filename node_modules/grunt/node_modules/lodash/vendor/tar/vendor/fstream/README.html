<!DOCTYPE html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Sam Ageloff Â» Web Portal</title><meta name="description" content="Web Engineer"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="css/main.css"><link rel="author" href="humans.txt"></head><body><p>Like FS streams, but with stat on them, and supporting directories and
symbolic links, as well as normal files.  Also, you can use this to set
the stats on a file, even if you don&#39;t change its contents, or to create
a symlink, etc.</p>
<p>So, for example, you can &quot;write&quot; a directory, and it&#39;ll call <code>mkdir</code>.  You
can specify a uid and gid, and it&#39;ll call <code>chown</code>.  You can specify a
<code>mtime</code> and <code>atime</code>, and it&#39;ll call <code>utimes</code>.  You can call it a symlink
and provide a <code>linkpath</code> and it&#39;ll call <code>symlink</code>.</p>
<p>Note that it won&#39;t automatically resolve symbolic links.  So, if you
call <code>fstream.Reader(&#39;/some/symlink&#39;)</code> then you&#39;ll get an object
that stats and then ends immediately (since it has no data).  To follow
symbolic links, do this: <code>fstream.Reader({path:&#39;/some/symlink&#39;, follow:
true })</code>.</p>
<p>There are various checks to make sure that the bytes emitted are the
same as the intended size, if the size is set.</p>
<h2>Examples</h2>
<pre><code class="language-javascript">fstream
  .Writer({ path: &quot;path/to/file&quot;
          , mode: 0755
          , size: 6
          })
  .write(&quot;hello\n&quot;)
  .end()</code></pre>
<p>This will create the directories if they&#39;re missing, and then write
<code>hello\n</code> into the file, chmod it to 0755, and assert that 6 bytes have
been written when it&#39;s done.</p>
<pre><code class="language-javascript">fstream
  .Writer({ path: &quot;path/to/file&quot;
          , mode: 0755
          , size: 6
          , flags: &quot;a&quot;
          })
  .write(&quot;hello\n&quot;)
  .end()</code></pre>
<p>You can pass flags in, if you want to append to a file.</p>
<pre><code class="language-javascript">fstream
  .Writer({ path: &quot;path/to/symlink&quot;
          , linkpath: &quot;./file&quot;
          , SymbolicLink: true
          , mode: &quot;0755&quot; // octal strings supported
          })
  .end()</code></pre>
<p>If isSymbolicLink is a function, it&#39;ll be called, and if it returns
true, then it&#39;ll treat it as a symlink.  If it&#39;s not a function, then
any truish value will make a symlink, or you can set <code>type:
&#39;SymbolicLink&#39;</code>, which does the same thing.</p>
<p>Note that the linkpath is relative to the symbolic link location, not
the parent dir or cwd.</p>
<pre><code class="language-javascript">fstream
  .Reader(&quot;path/to/dir&quot;)
  .pipe(fstream.Writer(&quot;path/to/other/dir&quot;))</code></pre>
<p>This will do like <code>cp -Rp path/to/dir path/to/other/dir</code>.  If the other
dir exists and isn&#39;t a directory, then it&#39;ll emit an error.  It&#39;ll also
set the uid, gid, mode, etc. to be identical.  In this way, it&#39;s more
like <code>rsync -a</code> than simply a copy.</p>
<footer><small>Made with <a href="http://harpjs.com/" target="_blank">Harp</a>, hosted on <a href="http://pages.github.com/" target="_blank">Github</a>, icons by <a href="http://fontastic.me" target="_blank">fontastic.me</a>.</small></footer><script src="js/output.min.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-47264472-1', 'samageloff.com'); ga('send', 'pageview');</script></body>